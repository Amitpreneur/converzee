{"ast":null,"code":"import React,{Component}from\"react\";import\"../../Create.css\";import Favicon from\"./Favicon\";import Timing from\"./Timing\";import Code from\"../../../subpages/create/Code\";import RequestHandler from\"../../../../actions/RequestHandler\";import{GET_ONE_TOOL,SAVE_TOOL,getPath}from\"../../../../actions/URLs\";import Text from\"./Text\";import SideBar from\"./SideBar\";import ToolUtil from\"../../../../utils/ToolUtil\";import Util from\"../../../Util\";import\"./Tab.css\";import{TabMessagingModal,TabMessagingModalResponse}from\"../../../utils/Modal\";import{ToolLayout,ButtonsGroup}from\"../../../layout/ToolLayout\";import{Modal}from\"antd\";import{ReponsiveImage}from\"../../../comman/PreviewAble\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const tabMessgae={name:\"\",activeTab:1,isImage:false,emoji:\"ðŸ”¥\",FAVICON:\"\",messages:[],timeFirstMsg:0,timeBetweenTwoMsg:2,SOUND:false,CODE:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:\"\"}]},randomMsg:\"\"};export default class TabMessaging extends Component{constructor(){super(...arguments);this.state={name:\"\",activeTab:1,isImage:false,emoji:\"ðŸ”¥\",FAVICON:\"\",messages:[],timeFirstMsg:0,timeBetweenTwoMsg:2,SOUND:false,CODE:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:\"\"}]},randomMsg:\"\"};this.randomText=[\"Hey \\ud83d\\udc4b, Don't Miss Out\",\"Donâ€™t forgetâ€¦\",\"Buy Now\",\"Notification ðŸ‘‹\",\"We have something ðŸ˜»\",\"Hey there Come back ðŸ¤\",\"HelloooooooooðŸ˜Š\",\"CoooooooL!ðŸ˜€\",\"Reward Points About To Expire ðŸ’¸\",\"Itâ€™s Hotttttttt ðŸ”¥\",\"SALE is on ðŸ˜\",\"Woohoo! You did it!ðŸ¤‘\",\"Become the #1 Shopper ðŸ›\",\"Itâ€™s Been A While And We Miss You ðŸ¥°\",\"Something New For You ðŸ˜‡\",\"Hereâ€™s something for you ðŸŽ\",\"Did You Know ðŸ¤”ðŸ§\"];this.onChangeActive=tabIndex=>{const{activeTab}=this.state;if(activeTab!==tabIndex){this.setState({activeTab:tabIndex});}};this.onUpdate=(index,data)=>{switch(index){case 1:this.setState({messages:data});break;case 2:this.setState({FAVICON:data});break;case 3:this.setState({TIMING:data});break;case 4:this.setState({SOUND:data});break;case 5:this.setState({CODE:data});break;default:break;}};this.updateChange=value=>{this.setState(value);};this.renderMain=()=>{const{activeTab,messages,isImage,emoji,FAVICON,timeFirstMsg,timeBetweenTwoMsg,TIMING,SOUND,CODE}=this.state;let component=null;switch(activeTab){case 1:component=/*#__PURE__*/_jsx(Text,{messages:messages,randomText:this.randomText,onChange:this.updateChange});break;case 2:component=/*#__PURE__*/_jsx(Favicon,{isImage:isImage,emoji:emoji,FAVICON:FAVICON,onChange:this.updateChange});break;case 3:component=/*#__PURE__*/_jsx(Timing,{timeFirstMsg:timeFirstMsg,SOUND:SOUND,timeBetweenTwoMsg:timeBetweenTwoMsg,onChange:this.updateChange});break;case 5:component=/*#__PURE__*/_jsx(Code,{...CODE,case:5,onChange:this.onUpdate});break;default:component=/*#__PURE__*/_jsx(Text,{messages:messages,onChange:this.onUpdate});break;}return component;};this.onClickSave=()=>{const toolData=this.state;if(this.state.CODE.include[0].url!==\"\"){if(!Util.isArrayEqual(tabMessgae,this.state,3)){RequestHandler.PostRequest(SAVE_TOOL,{toolData:TabMessagingModal(toolData)},(res,err)=>{if(res){if(res.data.success){Modal.success({content:\"Campaign Save SuccessFully\"});this.setState({randomMsg:\"\",messages:[]});setTimeout(()=>{this.props.history.push(\"/Campaigns\");},2000);}else{window.gs.toast(res.data.message,{position:\"bottom-right\",autoClose:true,type:window.gs.toast.TYPE.ERROR});}}});}}else{Modal.warning({content:\"Should Contain atleast one trigger point\"});}};this.renderRight=()=>{const{activeTab}=this.state;return activeTab!==1?/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/tab.png\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"sample_msg\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sample Messages\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush\",children:this.randomText.map(this.renderRandomMsgList)})]});};this.renderRandomMsgList=(item,index)=>{return/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[item,/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-success badge-pill msg_add_btn\",children:/*#__PURE__*/_jsx(\"i\",{onClick:()=>{this.setState({randomMsg:item});setTimeout(()=>{this.addmessage();},100);},title:\"Remove\",className:\"fa fa-plus-circle\",\"aria-hidden\":\"true\"})})]},item+index);};this.addmessage=()=>{const{randomMsg,messages}=this.state;if(randomMsg!==null&&randomMsg!==\"\"&&!messages.includes(randomMsg)){messages.push(randomMsg);this.updateChange({messages:messages});}else{window.gs.toast(\"Message Should be unique\",{position:\"top-right\",type:window.gs.toast.TYPE.ERROR});}};this.onDrawerClose=()=>{if(this.state.visible)this.setState({visible:false});else this.setState({visible:true});};this.back=()=>{this.setState({randomMsg:\"\",messages:[]});this.props.history.push(\"/Create\");};}componentDidMount(){const id=this.props.match?this.props.match.params?this.props.match.params.id:null:null;if(id){RequestHandler.PostRequest(GET_ONE_TOOL+id,{},(res,err)=>{if(res){Util.isRedirected=true;const data=TabMessagingModalResponse(res);if(data){this.setState(data,()=>{window.gs.navTitle(ToolUtil.getTool(data.toolId)+\"(\"+data.name+\")\");});}}});}else{const toolId=1;this.setState({toolId:toolId,toolName:ToolUtil.getTool(toolId),name:Util.CAMPAIGNS_NAME});Util.RedirectWhenCampaignEmpty(this.props);window.gs.navTitle(ToolUtil.getTool(toolId)+\"(\"+Util.CAMPAIGNS_NAME+\")\");}}render(){return/*#__PURE__*/_jsx(ToolLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-10 toolItem\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:this.renderMain()}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:this.renderRight()}),/*#__PURE__*/_jsx(ButtonsGroup,{backUrl:this.back,save:this.onClickSave})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 sideBarButtomPanel\",children:/*#__PURE__*/_jsx(SideBar,{activeTab:this.state.activeTab,onChangeActive:this.onChangeActive})})]})});}}","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/tools/TabMessaging/index.js"],"names":["React","Component","Favicon","Timing","Code","RequestHandler","GET_ONE_TOOL","SAVE_TOOL","getPath","Text","SideBar","ToolUtil","Util","TabMessagingModal","TabMessagingModalResponse","ToolLayout","ButtonsGroup","Modal","ReponsiveImage","tabMessgae","name","activeTab","isImage","emoji","FAVICON","messages","timeFirstMsg","timeBetweenTwoMsg","SOUND","CODE","include","type","url","exclude","randomMsg","TabMessaging","state","randomText","onChangeActive","tabIndex","setState","onUpdate","index","data","TIMING","updateChange","value","renderMain","component","onClickSave","toolData","isArrayEqual","PostRequest","res","err","success","content","setTimeout","props","history","push","window","gs","toast","message","position","autoClose","TYPE","ERROR","warning","renderRight","map","renderRandomMsgList","item","addmessage","includes","onDrawerClose","visible","back","componentDidMount","id","match","params","isRedirected","navTitle","getTool","toolId","toolName","CAMPAIGNS_NAME","RedirectWhenCampaignEmpty","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"../../Create.css\";\r\nimport Favicon from \"./Favicon\";\r\nimport Timing from \"./Timing\";\r\nimport Code from \"../../../subpages/create/Code\";\r\nimport RequestHandler from \"../../../../actions/RequestHandler\";\r\nimport { GET_ONE_TOOL, SAVE_TOOL, getPath } from \"../../../../actions/URLs\";\r\nimport Text from \"./Text\";\r\nimport SideBar from \"./SideBar\";\r\nimport ToolUtil from \"../../../../utils/ToolUtil\";\r\nimport Util from \"../../../Util\";\r\nimport \"./Tab.css\";\r\nimport { TabMessagingModal, TabMessagingModalResponse } from \"../../../utils/Modal\";\r\nimport { ToolLayout, ButtonsGroup } from \"../../../layout/ToolLayout\";\r\nimport { Modal } from \"antd\";\r\nimport { ReponsiveImage } from \"../../../comman/PreviewAble\";\r\n\r\nconst tabMessgae = {\r\n  name: \"\",\r\n  activeTab: 1,\r\n  isImage: false,\r\n  emoji: \"ðŸ”¥\",\r\n  FAVICON: \"\",\r\n  messages: [],\r\n  timeFirstMsg: 0,\r\n  timeBetweenTwoMsg: 2,\r\n  SOUND: false,\r\n  CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: \"\" }] },\r\n  randomMsg: \"\"\r\n};\r\nexport default class TabMessaging extends Component {\r\n  state = {\r\n    name: \"\",\r\n    activeTab: 1,\r\n    isImage: false,\r\n    emoji: \"ðŸ”¥\",\r\n    FAVICON: \"\",\r\n    messages: [],\r\n    timeFirstMsg: 0,\r\n    timeBetweenTwoMsg: 2,\r\n    SOUND: false,\r\n    CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: \"\" }] },\r\n    randomMsg: \"\"\r\n  };\r\n  randomText = [\r\n    \"Hey \\ud83d\\udc4b, Don't Miss Out\", \r\n    \"Donâ€™t forgetâ€¦\", \r\n    \"Buy Now\",\r\n    \"Notification ðŸ‘‹\",\r\n    \"We have something ðŸ˜»\",\r\n    \"Hey there Come back ðŸ¤\",\r\n    \"HelloooooooooðŸ˜Š\",\r\n    \"CoooooooL!ðŸ˜€\",\r\n    \"Reward Points About To Expire ðŸ’¸\",\r\n    \"Itâ€™s Hotttttttt ðŸ”¥\",\r\n    \"SALE is on ðŸ˜\",\r\n    \"Woohoo! You did it!ðŸ¤‘\",\r\n    \"Become the #1 Shopper ðŸ›\",\r\n    \"Itâ€™s Been A While And We Miss You ðŸ¥°\",\r\n    \"Something New For You ðŸ˜‡\",\r\n    \"Hereâ€™s something for you ðŸŽ\",\r\n    \"Did You Know ðŸ¤”ðŸ§\",\r\n  ];\r\n\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        if (res) {\r\n          Util.isRedirected = true;\r\n          const data = TabMessagingModalResponse(res);\r\n          if (data) {\r\n            this.setState(data, () => {\r\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"(\" + data.name + \")\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      const toolId = 1;\r\n      this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n      Util.RedirectWhenCampaignEmpty(this.props);\r\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \"(\" + Util.CAMPAIGNS_NAME + \")\");\r\n    }\r\n  }\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab } = this.state;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n  onUpdate = (index, data) => {\r\n    switch (index) {\r\n      case 1:\r\n        this.setState({ messages: data });\r\n        break;\r\n      case 2:\r\n        this.setState({ FAVICON: data });\r\n        break;\r\n      case 3:\r\n        this.setState({ TIMING: data });\r\n        break;\r\n      case 4:\r\n        this.setState({ SOUND: data });\r\n        break;\r\n      case 5:\r\n        this.setState({ CODE: data });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  updateChange = (value) => {\r\n    this.setState(value);\r\n  };\r\n  renderMain = () => {\r\n    const { activeTab, messages, isImage, emoji, FAVICON, timeFirstMsg, timeBetweenTwoMsg, TIMING, SOUND, CODE } = this.state;\r\n    let component = null;\r\n    switch (activeTab) {\r\n      case 1:\r\n        component = <Text messages={messages} randomText={this.randomText} onChange={this.updateChange} />;\r\n        break;\r\n      case 2:\r\n        component = <Favicon isImage={isImage} emoji={emoji} FAVICON={FAVICON} onChange={this.updateChange} />;\r\n        break;\r\n      case 3:\r\n        component = <Timing timeFirstMsg={timeFirstMsg} SOUND={SOUND} timeBetweenTwoMsg={timeBetweenTwoMsg} onChange={this.updateChange} />;\r\n        break;\r\n      case 5:\r\n        component = <Code {...CODE} case={5} onChange={this.onUpdate} />;\r\n        break;\r\n      default:\r\n        component = <Text messages={messages} onChange={this.onUpdate} />;\r\n        break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    const toolData = this.state;\r\n    if (this.state.CODE.include[0].url !== \"\") {\r\n      if (!Util.isArrayEqual(tabMessgae, this.state, 3)) {\r\n        RequestHandler.PostRequest(SAVE_TOOL, { toolData: TabMessagingModal(toolData) }, (res, err) => {\r\n          if (res) {\r\n            if (res.data.success) {\r\n              Modal.success({\r\n                content: \"Campaign Save SuccessFully\",\r\n              });\r\n              this.setState({\r\n                randomMsg: \"\",\r\n                messages: [],\r\n              });\r\n              setTimeout(() => {\r\n                this.props.history.push(\"/Campaigns\");\r\n              }, 2000);\r\n            } else {\r\n              window.gs.toast(res.data.message, { position: \"bottom-right\", autoClose: true, type: window.gs.toast.TYPE.ERROR });\r\n            }\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Modal.warning({\r\n        content: \"Should Contain atleast one trigger point\",\r\n      });\r\n    }\r\n  };\r\n\r\n  renderRight = () => {\r\n    const { activeTab } = this.state;\r\n    return ( activeTab !== 1 ? <ReponsiveImage isAs={true} url={\"asset/tab.png\"} /> : <div className=\"sample_msg\">\r\n      <h3>Sample Messages</h3>\r\n      <ul className=\"list-group list-group-flush\">{this.randomText.map(this.renderRandomMsgList)}</ul>\r\n      </div>);\r\n  };\r\n\r\n  renderRandomMsgList = (item, index) => {\r\n    return (\r\n      <li className=\"list-group-item d-flex justify-content-between align-items-center\" key={item + index}>\r\n        {item}\r\n        <span className=\"badge badge-success badge-pill msg_add_btn\">\r\n          <i onClick={() => { \r\n            this.setState({ randomMsg: item });\r\n            setTimeout(() => {\r\n              this.addmessage()\r\n            }, 100);\r\n          }} title=\"Remove\" className=\"fa fa-plus-circle\" aria-hidden=\"true\" />\r\n        </span>\r\n      </li>\r\n    );\r\n  };\r\n\r\n  addmessage = () => {\r\n    const { randomMsg, messages } = this.state;\r\n    if (randomMsg !== null && randomMsg !== \"\" && !messages.includes(randomMsg)) {\r\n      messages.push(randomMsg);\r\n      this.updateChange({ messages: messages });\r\n    } else {\r\n      window.gs.toast(\"Message Should be unique\", { position: \"top-right\", type: window.gs.toast.TYPE.ERROR });\r\n    }\r\n  };\r\n\r\n  onDrawerClose = () => {\r\n    if (this.state.visible) this.setState({ visible: false });\r\n    else this.setState({ visible: true });\r\n  };\r\n\r\n  back = () => {\r\n    this.setState({ \r\n      randomMsg: \"\",\r\n      messages: [],\r\n    });\r\n    this.props.history.push(\"/Create\");\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <ToolLayout>\r\n        <div className=\"row\">\r\n          <div className=\"col-10 toolItem\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">{this.renderMain()}</div>\r\n              <div className=\"col-md-6\">{this.renderRight()}</div>\r\n              <ButtonsGroup backUrl={this.back} save={this.onClickSave} />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-1 sideBarButtomPanel\">\r\n            <SideBar activeTab={this.state.activeTab} onChangeActive={this.onChangeActive} />\r\n          </div>\r\n        </div>\r\n      </ToolLayout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}